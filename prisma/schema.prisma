generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
// [1. ì‹ë³„ì ë° ì¸ì¦]
  id            String    @id @default(uuid())
  sub           String    @unique // Cognito User ID (í•„ìˆ˜)
  email         String?   @unique
  
  // [2. í”„ë¡œí•„ ì •ë³´ (UserProfileEditPage ëŒ€ì‘)]
  name          String?   // ì´ë¦„
  nickname      String?   @db.VarChar(30) // ë‹‰ë„¤ì„ (í•„ìš” ì‹œ ì‚¬ìš©, UIì—” ì•„ì§ ì—†ì§€ë§Œ ìˆìœ¼ë©´ ì¢‹ìŒ)
  address       String?   // ğŸ  ì£¼ì†Œ (UIì— ìˆì–´ì„œ ì¶”ê°€í•¨!)
  phoneNumber   String?   // ì—°ë½ì²˜
  profilePhoto  String?   // í”„ë¡œí•„ ì‚¬ì§„ URL

  // [3. ì„¤ì • (SettingsPage ëŒ€ì‘)]
  // ì „ì²´ ì•Œë¦¼ ìŠ¤ìœ„ì¹˜ (Switch onCheckedChange)
  alarmsEnabled Boolean   @default(true) 
  
  // ìƒì„¸ ì„¤ì • (Select value={alertPriority})
  // ì €ì¥ ì˜ˆì‹œ: { "priority": "important", "marketing": false }
  alarmConfig   Json?     

  // ê¸°ê¸° í† í° (í‘¸ì‹œ ì•Œë¦¼ìš©)
  pushToken     String?
  deviceInfo    Json?

  // [4. ì‹œìŠ¤í…œ ê´€ë¦¬]
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  deletedAt     DateTime? // ê³„ì • ì‚­ì œ(handleDelete) ì‹œ ì‚¬ìš© (Soft Delete)

  // [5. ê´€ê³„]
  pets          Pet[]
}

enum AdoptionSource {
  shelter
  agency
  private
  rescue
  other
}

enum Weekday {
  mon
  tue
  wed
  thu
  fri
  sat
  sun
}

enum Gender {
  male
  female
}

enum FoodType {
  dry
  wet
  mixed
  prescription
}

enum WaterSource {
  fountain
  bowl
  mixed
}

enum ActivityLevel {
  low
  medium
  high
}

enum LivingEnvironment {
  indoor
  outdoor
  both
}

enum WaterIntakeTendency {
  low
  normal
  high
  unknown
}

enum NotificationPreference {
  all
  important
  none
}

enum MedicationSelectionSource {
  recommended
  search
}

model Pet {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id])

  name               String
  adoptionPath       String
  adoptionSource     AdoptionSource?
  adoptionAgencyCode String?
  agencyCode         String?

  dataSharing      Json?
  careShareStartAt Int?
  careShareEndAt   Int?

  birthDate       String?
  estimatedAge    Int?
  unknownBirthday Boolean
  gender          Gender
  neutered        Boolean
  breed           String
  weight          Float
  bcs             Float?

  foodType               FoodType
  waterSource            WaterSource
  surveyFrequencyPerWeek Int?
  surveyDays             Weekday[]
  activityLevel          ActivityLevel?
  livingEnvironment      LivingEnvironment?
  multiCat               Boolean?
  catCount               Int?
  mealsPerDay            Int?
  waterIntakeTendency    WaterIntakeTendency?

  medicalHistory         Json?
  medications            String?
  medicationText         String?
  medicationsSelected    Json? // MedicationSelection[]
  medicationOtherText    String?
  notes                  String?
  vetInfo                String?
  notificationPreference NotificationPreference?
  profilePhoto           String?

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
}
